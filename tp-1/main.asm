;################################################################################
;#	Título: Codigo principal de la aplicacion de 32 bits						#
;#																				#
;#	Versión:		1.0							Fecha: 	27/04/2015				#
;#	Autor: 			D. Garcia					Tab: 	4						#
;#	Compilación:	Usar Makefile												#
;#	Uso: 			-															#
;#	------------------------------------------------------------------------	#
;#	Descripción:																#
;#	------------------------------------------------------------------------	#
;#	Revisiones:																	#
;#		1.0 | 27/04/2015 | D.GARCIA | Inicial									#
;#	------------------------------------------------------------------------	#
;#	TODO:																		#
;#		-																		#
;################################################################################


;--------------------------------------------------------------------------------
; Macros
;--------------------------------------------------------------------------------
%define 	VGA_RAM		0xB8000

;--------------------------------------------------------------------------------
; Simbolos externos
;--------------------------------------------------------------------------------
GLOBAL		start32

;********************************************************************************
; Datos
;********************************************************************************
SECTION 	.data		
;msgInicio 	db "Mi primer programa desde BIOS .....", 0
msgInicio 	db "MI PRIMER PROGRAMA DESDE BIOS ....", 0

USE32
;********************************************************************************
; Codigo principal
;********************************************************************************
SECTION  	.main 			progbits

start32:
	xchg 	bx, bx						; Magic breakpoint
	mov		edi, VGA_RAM + 160 * 2
	mov		esi, msgInicio
	mov		ah, 07						; Atributo

print:	
	mov		al, [esi]
	cmp		al, 0
	jz		fin
	mov 	[edi], ax
	add		edi, 2
	inc		esi
	loop 	print

fin:
	nop									; Ojo con esto!!
	;hlt		
	jmp 	fin
	
;********************************************************************************
; 						-  -- --- Fin de archivo --- --  -
; D. Garcia 																c2013
;********************************************************************************
 
